---
title: 'VisWaterNet: A Python package for visualization of water distribution networks'
tags:
  - Python
  - NetworkX
  - Water distribution
  - Visualization
authors:
  - name: Meghna Thomas
    corresponding: true 
    affiliation: 1
  - name: Tyler Trimble
    affiliation: 1
  - name: Lina Sela
    orcid: 0000-0002-5834-8451
    affiliation: 1
affiliations:
 - name: The University of Texas at Austin, USA
   index: 1
date: 09 January 2023
bibliography: paper.bib

---

# Summary

Water distribution systems (WDSs) are complex networks and are typically represented as graphs with multiple kinds of nodes (e.g., junctions, reservoirs, and tanks) and links (e.g., pipes, pumps, and valves). These network elements have both static characteristics, such as pipe diameter and nodal elevation, as well as time-varying properties, such as pipe flow rate and nodal pressure. Researchers and engineers working with WDSs have the need to model, simulate, analyze, and visualize these systems. The visualization of data over network topology can lend spatial context and a better understanding of simulation results and network properties. This paper presents `VisWaterNet`, an open-source Python package that enables easy and customizable visualization of WDS characteristics. The package allows for the plotting of numerical network node and link data by changing element sizes and assigning colors either in a continuous manner (i.e., according to a color gradient scale) or a discrete manner (i.e., according to discrete grouped data intervals). `VisWaterNet` also allows the plotting of categorical data, custom data generated by the user, and animations to demonstrate the change in network properties over time. 

# Statement of need

Existing open-source tools that cater to WDSs, such as `EPANET` [@rossman2020] and the Python package `WNTR` [@klise2017], allow users to perform extended period simulations and analysis of water distribution system models under a range of different conditions. However, while these tools do provide basic network visualization options, they are limited in their flexibility and capabilities. On the other hand, popular software such as `Cytoscape` [@shannon2003] and `Graphviz` [@ellson2004] allow the easy integration of attribute data into sophisticated network plots, but it is challenging to apply them to the context of WDSs. `VisWaterNet`  was developed to provide an accessible and multifunctional approach to WDS-specific network visualization. The package is accompanied by clear documentation and code examples in order to facilitate ease of adoption, and can prove to be a helpful tool for researchers and practitioners in the domain of WDSs.

# Functionality

`VisWaterNet` extracts network characteristics and simulation results of a user-provided .INP file through `WNTR` [@klise2017], and then constructs a `NetworkX` [@hagberg2008] graph on a `Matplotlib` [@hunter2007] figure axis. The simulation results are based on the `EPANET 2.2` [@rossman2020] hydraulic engine. `VisWaterNet` offers different plotting options to visualize data:
1.	In accordance with current plotting standards, users can choose to represent numeric data in a *continuous* manner, i.e., by assigning  nodes or links colors chosen from a color gradient scale. \autoref{fig:fig1} shows an example of a continuous plot of mean nodal pressure data for network CTown [@ostfeld2012] generated by `VisWaterNet`.

![Continuous plot of mean nodal pressure.\label{fig:fig1}](figures/fig_1.png)

2.	Alternately, users can plot numeric data in a *discrete* manner, i.e., the data is grouped into intervals and each interval is assigned a single color. \autoref{fig:fig2} shows an example of a discrete plot  generated for the same nodal pressure data shown in \autoref{fig:fig1}.
 
![Discrete plot of mean nodal pressure.\label{fig:fig2}](figures/fig_2.png)

3.	Categorical data, i.e., a property of each node or link that belongs to a fixed set of categories, can also be plotted. This functionality is useful in visualizing node or link attributes that are represented as *strings*, such as nodal demand pattern names or pipe material, or for numeric attributes that typically take on only a discrete set of options, such as pipe diameter. \autoref{fig:fig3} shows an example of a categorical data plot depicting link diameters in the CTown network.
 
![Categorical plot of pipe diameters.\label{fig:fig3}](figures/fig_3.png)

Additional features of `VisWaterNet` functions include:
1.	The ability to import and visualize custom data generated either in Python scripts or in Excel files
2.	The ability to add a second dimension of information to a plot by customizing node markers and sizes and link styles and widths
3.	The ability to convert units (e.g., a user can choose to represent length data in units of *m*, *cm*, *ft*, or *in*.
4.	The ability to represent simulation results at a specified time step or summarized throughout the duration (e.g., a user can choose to visualize minimum, maximum, or mean pressure, or pressure at a particular time step)
5.	The ability to customize the number of intervals or width of intervals for discrete data plots, and hide intervals with no data points
6.	The ability to customize and label specific nodes and links 

# Acknowledgements

This work was supported by the National Science Foundation under grants 1943428 and 1953206. We would like to thank ‪Gerardo Riaño-Briceño‬, Erik Vosburgh, and Matthew Frankel for testing the package and providing valuable feedback.

# References
